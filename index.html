<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="img/mapa.png" />
    <title>IDE DGEyC</title>
    <link rel="stylesheet" href="openLayers/ol.css" type="text/css">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="jquery-ui/jquery-ui.css">
    <script src="openLayers/ol.js"></script>
    <script src="jquery/jquery-3.1.1.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <style>
        .imprimir {
            top: 105px;
            left: .5em;
        }
        .ol-touch .imprimir {
            top: 80px;
        }
        .capas {
            top: 65px;
            left: .5em;
        }
        .ol-touch .capas {
            top: 80px;
        }
        #map:focus {
            outline: #4A74A8 solid 0.15em;
        }
        .tooltip-inner {
             white-space: nowrap;
        }
        #panel {
            display: none;
            border: 1px solid #000;
            width: 200px;
        }
        #panel-capas {
            display: none;
            border: 1px solid #000;
            width: 200px;
        }
    </style>
</head>
<body>
<div id="map" style="width: 100%; height: 780px" tabindex="0"></div>
<script>
    /**
     * Define a namespace for the application.
     */
    window.app = {};
    var app = window.app;


    //
    // Define imprimir control.
    //


    /**
     * @constructor
     * @extends {ol.control.Control}
     * @param {Object=} opt_options Control options.
     */
    app.ImprimirControl = function(opt_options) {

        var options = opt_options || {};

        var button = document.createElement('input');
        button.setAttribute('type', 'image');
        button.setAttribute('src', 'img/impresora.png');
        button.setAttribute('width', '25');
        button.setAttribute('height', '25');
        button.setAttribute('title', 'Imprimir');
        button.setAttribute('data-toggle', 'tooltip');

        var handleImprimir = function() {
            $('#panel').toggle('slide', {}, 500);
        };

        button.addEventListener('click', handleImprimir, false);
        button.addEventListener('touchstart', handleImprimir, false);

        var element = document.createElement('div');
        element.className = 'imprimir ol-unselectable ol-control';
        element.appendChild(button);

        var panel = document.createElement('div');
        panel.setAttribute('id', 'panel');
        element.appendChild(panel);

        ol.control.Control.call(this, {
            element: element,
            target: options.target
        });

    };
    ol.inherits(app.ImprimirControl, ol.control.Control);

    //
    // Define capas control.
    //

    app.CapasControl = function(opt_options) {

        var options = opt_options || {};

        var button = document.createElement('input');
        button.setAttribute('type', 'image');
        button.setAttribute('src', 'img/capas.png');
        button.setAttribute('width', '25');
        button.setAttribute('height', '25');
        button.setAttribute('title', 'Capas');
        button.setAttribute('data-toggle', 'tooltip');

        var handleCapas = function() {
            $('#panel-capas').toggle('slide', {}, 500);
        };

        button.addEventListener('click', handleCapas, false);
        button.addEventListener('touchstart', handleCapas, false);

        var element = document.createElement('div');
        element.className = 'capas ol-unselectable ol-control';
        element.appendChild(button);

        var panel = document.createElement('div');
        panel.setAttribute('id', 'panel-capas');
        element.appendChild(panel);

        ol.control.Control.call(this, {
            element: element,
            target: options.target
        });

    };
    ol.inherits(app.CapasControl, ol.control.Control);

    //
    // Create map
    //

    var map = new ol.Map({
        layers: [
            new ol.layer.Tile({
                source: new ol.source.OSM()
            })
        ],
        target: 'map',
        controls: ol.control.defaults().extend([
                new app.ImprimirControl(),
                new app.CapasControl()
        ]),
        view: new ol.View({
            center: ol.proj.transform([-68, -43], 'EPSG:4326', 'EPSG:3857'),
            zoom: 6,
            maxZoom: 8,
            minZoom: 6
        }),
    });

    $('.ol-zoom-in, .ol-zoom-out').tooltip({
        placement: 'right'
    });
    $('[data-toggle="tooltip"]').tooltip({
        placement: 'right'
    });
</script>
<script src="jquery-ui/jquery-ui.js"></script>
<!-- The line below is only needed for old environments like Internet Explorer and Android 4.x -->
<script src="http://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>
</body>
</html>